# Nested Classes（入れ子クラス）

クラスの中にクラスを定義したものを _nested class（ネスティッド クラス、入れ子クラス）_ と呼ぶ。

例

```java
class OuterClass {
  //...
  class NestedClass {
    //...
  }
}
```

---

- 用語（入れ子クラスの分類）
  - static: _static nested class(スタティック ネスティッド クラス、静的入れ子クラス)_
  - staticでない: _inner class（インナー クラス、内部クラス）_

---

入れ子クラスは、それを囲むクラス（アウター クラス）のメンバー。入れ子クラスは他のメンバー（`private`を含む）へアクセスできる。上記の例における `OuterClass` のメンバーとして、入れ子クラスは `private`・`public`・`protected`・パッケージ プライベート のいずれとしても定義できる。（アウター クラス は、`public` か パッケージ プライベート のいずれかで定義できる。）

## Why Use Nested Classes?(入れ子クラスを使う理由)

- **1ヶ所でのみ使われるクラスを論理的にグループ化する方法であるため。** あるクラスAが、クラスBからのみ使われるとする。また、クラスAをクラスBへ埋め込むのが論理的に妥当だとする。クラスAのような「ヘルパー クラス」を入れ子にすることにより、パッケージが効率的になる。

- **カプセル化を高める。** クラスA、Bがあるとする。クラスBがクラスAのプライベート メンバーへアクセスしたいとする。クラスBをクラスAの入れ子クラスにする。そうすると、クラスAのメンバーはプライベートのままでよくなる。また、クラスBを他のクラスから隠蔽できる。

- **可読性と保守性が向上する。** 小さいクラスをトップレベル（入れ子ではない） クラスへ入れ子にすることにより、関連するコードを近くへ配置することになる。

## Static Nested Class(静的入れ子クラス)

クラス メソッドや変数と同様に、静的入れ子クラスもアウター クラスと紐付いている。静的クラス メソッドと同様に、静的入れ子クラスもアウター クラス のインスタンス メソッドや変数へ直接アクセスできない: オブジェクトの参照を通じてのみアクセスできる。

---

**ノート:** 静的入れ子クラスは、他のトップレベルのクラスと同様、アウター クラス（や他のクラス）のインスタンス メンバーと連携する。つまり、静的入れ子クラスはパッケージングの都合で他のクラスに入れ子にされているが、振る舞いの上ではトップレベルのクラスである。

---

静的入れ子クラスへアクセスする時は、アウタークラス名を前に付加する。

```java
OuterClass.StaticNestedClass nestedObject = new OuterClass.StaticNestedClass();
```

## Inner Clases(インナー クラス）

インスタンスのメソッドや変数と同様、インナー クラスはアウター クラスのインスタンスと紐付いている。また、オブジェクトのメソッドやフィールドへ直接アクセスできる。staticなメンバーを定義できない。

インナー クラスをインスタンス化するには、最初にアウター クラスを定義しなければならない。それからアウター クラスの中でインナー オブジェクトを生成する。

```java
OuterClass outerObject = new OuterClass();
OuterClass.InnerClass innerObject = outerObject.new InnerClass();
```